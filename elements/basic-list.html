<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-styles/color.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-badge/paper-badge.html" />
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../src/shared-styles.html">

<dom-module id="basic-list" >
    <template>
        <style>
            :host {
                display: block;
                @apply(--paper-font-common-base);
                font-family: sans-serif;
            }

            .content {
                @apply(--layout-vertical);
                height: 100%;
            }

            .white-toolbar {
                background: white;
                color: #333;
            }

            .pink-toolbar {
                background: var(--paper-grey-500);
                color: white;
            }

            app-toolbar {
                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.3);
                font-size: 18px;
            }

            app-drawer {
                text-align: left;
                border-left: 1px solid #ccc;
            }

            app-toolbar paper-icon-button {
                --paper-icon-button-ink-color: white;
            }

            paper-badge {
                margin-top: 5px;
             
            }

                paper-badge[label="0"] {
                    opacity: 0;

                }

            @media (min-width: 640px) {

                paper-badge {
                    display: none;
                }
            }

            #itemsList,
            #selectedItemsList {
                @apply(--layout-flex);
            }

            .item {
                @apply(--layout-horizontal);
                cursor: pointer;
                padding: 16px 22px;
                border-bottom: 1px solid #D7CCC8;
            }


            .avatar {
                height: 50px;
                width: 50px;
                border-radius: 20px;
                box-sizing: border-box;
                background-color: #ddd;
            }

            .pad {
                @apply(--layout-flex);
                @apply(--layout-vertical);
                padding: 0 16px;
            }

            .primary {
                font-size: 16px;
            }

            .secondary {
                font-size: 12px;
            }

            .dim {
                color: gray;
            }

 

            paper-item {
                white-space: nowrap;
                cursor: pointer;
                position: relative;
            }

                paper-item:hover::after {
                    content: "－";
                    width: 16px;
                    height: 16px;
                    display: block;
                    border-radius: 50% 50%;
                    background-color: var(--google-red-300);
                    margin-left: 10px;
                    line-height: 16px;
                    text-align: center;
                    color: white;
                    font-weight: bold;
                    text-decoration: none;
                    position: absolute;
                    right: 15px;
                    top: calc(50% - 8px);
                }

            .no-selection {
                color: #999;
                margin-left: 10px;
                line-height: 50px;
            }

            iron-list {
                @apply(--layout-flex);
            }

        </style>
        <!--BEN: url contacts lets you pass in contacts.json-->
        <iron-ajax url="{{contacts}}" last-response="{{data}}" auto></iron-ajax>
        <app-drawer-layout fullbleed>
            <div class="content">
                <app-toolbar class="pink-toolbar">
                    <div main-title>Active Job Names</div>
  
                </app-toolbar>
                <!-- Main List for the items -->
                <iron-list id="itemsList" items="[[data]]"  selected-item="{{selectedItem}}" selection-enabled>
                    <template>
                        <div>
                            <div tabindex$="[[tabIndex]]" aria-label$="Select/Deselect [[item.name]]" class$="[[_computedClass(selected)]]">
                                <img class="avatar" src="[[item.image]]">
                                <div class="pad">
                                    <div class="primary">
                                        [[item.name]]
                                    </div>
                                    <div class="secondary dim">[[item.shortText]]</div>
                                </div>
             
                            </div>
                            <div class="border"></div>
                        </div>
                    </template>
                </iron-list>
            </div>

        </app-drawer-layout>>
    </template>

    <script>

      HTMLImports.whenReady(function() {

        Polymer({

          is: 'basic-list',

          properties: {
            selectedItem: {
              type: Object,
              observer: '_selectedItemChanged'

            }
          },

          _computedClass: function(isSelected) {
            var classes = 'item';
            if (isSelected) {
              classes += ' selected';
            }
            return classes;
          },

          _selectedItemChanged: function(selected){
            if (!selected) {return;} 
            this.fire('basic-list-selected-item', {selected}); 
            console.log('selected: ' , selected);
          }

        });

     });

    </script>

</dom-module>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-input/iron-input.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../../elements/selection-list.html" />
<link rel="import" href="../../elements/basic-list.html" />
<link rel="import" href="../../elements/dropdown-list-array.html" />
<link rel="import" href="../../behaviors/on-tap-behavior.html"/>

<dom-module id="work-request">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
    </style>


<paper-dropdown-menu label="Type of Work:">
  <paper-listbox class="dropdown-content" selected="{{selectedWork}}" attr-for-selected="value" >
    <paper-item value="Electrical">Electrical</paper-item>
    <paper-item value="Framing">Framing</paper-item>
    <paper-item value="Landscape">Landscape</paper-item>
    <paper-item value="Roofing">Roofing</paper-item>
  </paper-listbox>
</paper-dropdown-menu>
 
<dropdown-list-array  contacts="../data/locations.json"></dropdown-list-array>

 <paper-dropdown-menu label="Arrival Time:">
  <paper-listbox class="dropdown-content" selected="1">
    <paper-item>7:00Am</paper-item>
    <paper-item>8:00Am</paper-item>
    <paper-item>9:00Am</paper-item>
    <paper-item>10:00Am</paper-item>
  </paper-listbox>
</paper-dropdown-menu>

<paper-dropdown-menu label="Date:">
  <paper-listbox class="dropdown-content" selected="1">
    <paper-item>1/2/19</paper-item>
    <paper-item>2/8/19</paper-item>
    <paper-item>3/8/19</paper-item>
    <paper-item>2/29/19</paper-item>
  </paper-listbox>
</paper-dropdown-menu>

<paper-dropdown-menu label="employee:">
  <paper-listbox class="dropdown-content" selected="1">
    <template is="dom-repeat" items="{{employees}}">
      <paper-item value="{{item.first}}">{{item.first}}</paper-item>
    </template>

  </paper-listbox>
</paper-dropdown-menu>
<p>
<paper-button raised id="contactsButton" on-tap="_contactsButtonTapped">Choose Contacts</paper-button>

<input is="iron-input" bind-value="{{selectedWork}}">
<span>[[selectedWork]] crew will be at [[selectedItem]]</span>

  </template>


  <script>
    Polymer({

      is: 'work-request',

          properties: {
            selectedWork: {
              type: String,
              observer: '_selectedWorkChanged',
            }
          },


      behaviors: [window.BCDEV.Behaviors.OnTapBehavior],

      listeners: {
        'dropdown-list-array-selected-item': '_selectedItem'
      },
      
      _contactsButtonTapped() {
        const open = () => {
          const callback = () => {
            window.BCDEV.contactsOverlay.init();
          };
           window.BCDEV.contactsOverlay.open(callback);
        };

        this.onTap = open;


      },

      ready: function() {
        this.employees = [
            {first: 'Bob', last: 'Smith'},
            {first: 'Suzy', last: 'Johnson'},
            {first: 'Bob', last: 'Smith'},
            {first: 'Sally', last: 'Johnson'},
            {first: 'Bob', last: 'Smith'},
    
        ];
      },


      _selectedWorkChanged: function(selected){
        if (!selected) {return;} 
          console.log('selected: ' , selected);
      },

      _selectedItem (event){
        console.log(event.detail.selected);
        this.selectedItem = event.detail.selected ;
      }




    });

  </script>
</dom-module>
